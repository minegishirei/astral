import{d as T,g as n,c as B,o as m,b as o,e as N,w as e,ag as g,u as s,a as v,f as F,W as i,t as c,V as C,F as z}from"./index-CV8jgHLp.js";import{g as A,s as M,d as R}from"./callAPI-BwtG_Ftr.js";import{V as y}from"./VAvatar-chzBE4A5.js";import{V as I}from"./VImg-BkM45_PU.js";import{d as h,V as D,a as f,b as _,c as p}from"./VMenu-qx-k4EQP.js";import{V as S}from"./VListItemAction--c9byJgO.js";import{V as E}from"./VDivider-B6LBcaL_.js";const K=T({__name:"UserIcon",props:{image_url:{},user_name:{},onClickFollow:{},onClickUnFollow:{}},setup(U){n(""),n("");const d=n(null),l=n(!1),w=n(!1),a=U,k=n(0),V=n(0),b=r=>{a.onClickFollow(r),l.value=!l.value},x=r=>{a.onClickUnFollow(r),l.value=!l.value},L=async r=>{if(r){const t=await A(!1),u=await M(t.id_token,{user_id:R(t.id_token)["cognito:username"],check_follower_id:a.user_name});console.log(u),l.value=u.does_following,k.value=u.followed_count.followed_count,V.value=u.follower_count.follower_count,w.value=u.does_followed}};return(r,t)=>(m(),B(z,null,[o(y,{size:"32",class:"cursor-pointer",color:"primary",variant:"tonal"},{default:e(()=>[o(I,{ref_key:"activatorRef",ref:d,onClick:g(()=>{},["stop","prevent"]),src:a.image_url},null,8,["src"]),o(h,{activator:s(d),width:"230",location:"bottom end",offset:"14px","onUpdate:modelValue":L},{default:e(()=>[o(D,null,{default:e(()=>[o(f,null,{prepend:e(()=>[o(S,{start:""},{default:e(()=>[o(y,{color:"primary",variant:"tonal"},{default:e(()=>[o(I,{src:a.image_url},null,8,["src"])]),_:1})]),_:1})]),default:e(()=>[o(_,{class:"font-weight-semibold"},{default:e(()=>[i(c(a.user_name),1)]),_:1}),o(p,null,{default:e(()=>[i(c(s(l)?"Following":""),1)]),_:1}),o(p,null,{default:e(()=>[i(c(s(w)?"Followed":""),1)]),_:1})]),_:1}),o(E,{class:"my-2"}),o(f,{link:""},{default:e(()=>[o(p,null,{default:e(()=>[i(c(s(k))+"Follower ã€€"+c(s(V))+"Following ",1)]),_:1})]),_:1}),s(l)?F("",!0):(m(),v(f,{key:0,link:"",onClick:b},{prepend:e(()=>[o(C,{class:"me-2",icon:"ri-user-add-line",size:"22"})]),default:e(()=>[o(_,null,{default:e(()=>t[0]||(t[0]=[i("Follow")])),_:1})]),_:1})),s(l)?(m(),v(f,{key:1,link:"",onClick:x},{prepend:e(()=>[o(C,{class:"me-2",icon:"ri-user-add-line",size:"22"})]),default:e(()=>[o(_,null,{default:e(()=>t[1]||(t[1]=[i("Unfollow")])),_:1})]),_:1})):F("",!0)]),_:1})]),_:1},8,["activator"])]),_:1}),N("span",{class:"ms-2",ref_key:"activatorRef",ref:d,onClick:g(()=>{},["stop","prevent"])},c(a.user_name),513)],64))}});export{K as _};
