import{ai as o}from"./index-CV8jgHLp.js";import{v as i,g as n,d as a}from"./callAPI-BwtG_Ftr.js";const u=o("userId",{state:()=>({isLoading:!0,userId:localStorage.getItem("user_id")||"",idToken:localStorage.getItem("token")||"",hasBeenLogined:localStorage.getItem("has_been_logined")||"false"}),actions:{async fetchUserId(s=!1){if(this.userId.length>0&&i(this.idToken))return{userId:this.userId,idToken:this.idToken};const t=await n(s),e=a(t.id_token)["cognito:username"];return this.userId=e,this.idToken=t.id_token,e!==""&&(this.hasBeenLogined="true",localStorage.setItem("user_id",e),localStorage.setItem("has_been_logined","true")),this.isLoading=!1,{userId:this.userId,idToken:this.idToken}}}});export{u};
