import{_ as ae}from"./UserIcon.vue_vue_type_script_setup_true_lang-WHbtGkk8.js";import{_ as se}from"./MoreBtn.vue_vue_type_script_setup_true_lang-Dy68vNw2.js";import{d as X,g as _,i as Z,a as q,o as y,w as l,c as T,f as Y,u as i,b as e,a0 as ie,e as a,$ as V,V as w,ag as J,W as m,F as K,a1 as H,t as p,q as N}from"./index-CV8jgHLp.js";import{t as ne,c as ee,s as re,g as de,u as ue,d as ce,e as me,f as fe}from"./callAPI-BwtG_Ftr.js";import{u as le}from"./userId-D07-fi0X.js";import{a as u,V as x}from"./VRow-BNeMIAw1.js";import{a as b,V as k}from"./VCard-MZJ7nrb6.js";import{V as S}from"./VAvatar-chzBE4A5.js";import{V as pe}from"./VForm-B19n-YV0.js";import{V as R}from"./VTextField-DKjCTJSD.js";import{V as _e}from"./VTextarea-Bzcu-6WB.js";import{a as ge,V as we,b as B,c as ve}from"./VTabs-BjrcS8jW.js";import{V as O}from"./VDataTable-jIGLDWDd.js";import{V as Q}from"./VChip-Bd_g2X-r.js";import{V as be}from"./VCheckbox-vqR-RB0s.js";import"./VImg-BkM45_PU.js";import"./VMenu-qx-k4EQP.js";import"./index-Dd8R62SY.js";import"./ssrBoot-DilDC8hj.js";import"./VDivider-B6LBcaL_.js";import"./VOverlay-DotTAGFz.js";import"./easing-DY7PVvcf.js";import"./scopeId-BZDymwJT.js";import"./forwardRefs-C-GTDzx5.js";import"./VListItemAction--c9byJgO.js";/* empty css              */import"./VInput-BMo-g2I_.js";import"./VSlideGroup-FymrTth9.js";import"./filter-CknBUQD-.js";import"./VCheckboxBtn-qRRPPrfx.js";import"./VTable-nwIT1wCq.js";const xe={key:0,id:"loading",style:{position:"absolute","z-index":"99999",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex","flex-direction":"column","align-items":"center"}},ke={class:"d-flex flex-column justify-center gap-5"},Ve={class:"d-flex flex-wrap gap-2"},ye=X({__name:"AccountSettingCards",setup(te){const I={user_id:"",image:"",description:"",website_url:"",location:"",birthdate:"",updated_at:"",profile_image_url:""},U=le(),h=_(!1),F=_(),z=_(!1),n=_(structuredClone(I)),v=()=>{n.value=structuredClone(I)},$=c=>{const s=new FileReader,{files:d}=c.target;d&&d.length&&(s.readAsDataURL(d[0]),s.onload=()=>{n.value.profile_image_url="",typeof s.result=="string"&&(n.value.image=s.result)})},D=()=>{n.value.image=I.image},L=async()=>{z.value=!1,await ne(U.idToken,n.value),await A()},A=async()=>{h.value=!0;const c=(await U.fetchUserId()).userId,s=await ee((await U.fetchUserId()).idToken,{user_id:c});n.value={...n.value,...s.user_data,user_id:c},console.log(n.value),h.value=!1};return Z(A),(c,s)=>(y(),q(x,null,{default:l(()=>[i(h)?(y(),T("div",xe,[e(ie,{indeterminate:""})])):Y("",!0),i(h)?Y("",!0):(y(),q(u,{key:1,cols:"12"},{default:l(()=>[e(b,{title:"Account Setting"},{default:l(()=>[e(k,{class:"d-flex"},{default:l(()=>[e(S,{rounded:"lg",size:"100",class:"me-6",image:i(n).profile_image_url===""?i(n).image:i(n).profile_image_url},null,8,["image"]),a("form",ke,[a("div",Ve,[e(V,{color:"primary",onClick:s[0]||(s[0]=d=>{var C;return(C=i(F))==null?void 0:C.click()})},{default:l(()=>[e(w,{icon:"ri-upload-cloud-line",class:"d-sm-none"}),s[5]||(s[5]=a("span",{class:"d-none d-sm-block"},"Upload new photo",-1))]),_:1}),a("input",{ref_key:"refInputEl",ref:F,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:$},null,544),e(V,{type:"reset",color:"error",variant:"outlined",onClick:D},{default:l(()=>[s[6]||(s[6]=a("span",{class:"d-none d-sm-block"},"Reset",-1)),e(w,{icon:"ri-refresh-line",class:"d-sm-none"})]),_:1})]),s[7]||(s[7]=a("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1))])]),_:1}),e(k,null,{default:l(()=>[e(pe,{class:"mt-6"},{default:l(()=>[e(x,null,{default:l(()=>[e(u,{md:"12",cols:"12"},{default:l(()=>[e(R,{modelValue:i(n).user_id,"onUpdate:modelValue":s[1]||(s[1]=d=>i(n).user_id=d),placeholder:"Tokyo",label:"User Id",disabled:""},null,8,["modelValue"])]),_:1}),e(u,{md:"12",cols:"12"},{default:l(()=>[e(_e,{modelValue:i(n).description,"onUpdate:modelValue":s[2]||(s[2]=d=>i(n).description=d),placeholder:"Wakou City Legend.",label:"Description",rows:"4"},null,8,["modelValue"])]),_:1}),e(u,{md:"12",cols:"12"},{default:l(()=>[e(R,{modelValue:i(n).location,"onUpdate:modelValue":s[3]||(s[3]=d=>i(n).location=d),placeholder:"Saitama",label:"Living In"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",md:"12"},{default:l(()=>[e(R,{modelValue:i(n).website_url,"onUpdate:modelValue":s[4]||(s[4]=d=>i(n).website_url=d),label:"Website",placeholder:"example.com",type:"url"},null,8,["modelValue"])]),_:1}),e(u,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(V,{onClick:J(L,["prevent"]),disabled:i(z)},{default:l(()=>s[8]||(s[8]=[m("Save changes")])),_:1},8,["disabled"]),e(V,{color:"secondary",variant:"outlined",type:"reset",onClick:J(v,["prevent"])},{default:l(()=>s[9]||(s[9]=[m(" Reset ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}))}}),he={class:"d-flex align-center gap-x-3"},Ce={class:"d-flex flex-column"},Ie={class:"text-h5"},Ue={class:"d-flex align-center gap-x-3"},Fe={class:"d-flex flex-column"},ze={class:"text-h5"},Ae={class:"d-flex align-center gap-x-4"},Pe={class:"d-flex gap-4"},Te={class:"text-capitalize text-high-emphasis"},Se={class:"text-capitalize text-high-emphasis"},$e={class:"d-flex align-center gap-x-4"},De={class:"d-flex gap-4"},Le={class:"text-capitalize text-high-emphasis"},Ne={class:"text-capitalize text-high-emphasis"},Re={class:"d-flex flex-column gap-y-3"},Be={class:"font-weight-medium"},wl=X({__name:"account-settings",setup(te){const F=`https://dev-astral.auth.ap-northeast-1.amazoncognito.com/forgotPassword?client_id=4a8e6va0e6k1l8gqp6r48cesgu&response_type=code&scope=email+openid+profile&redirect_uri=${window.location.origin+"/"}`,z=["パスワードの最小文字数は7文字以上です。","一文字以上の大文字の英字が必要です。","一文字以上の小文字の英字が必要です。","一文字以上の数字が必要です。","一文字以上の記号が必要です。"],n=_("account"),v=_(!1),$=[{title:"Account",icon:"ri-group-line",tab:"account"},{title:"Profile",icon:"ri-settings-2-line",tab:"setting"},{title:"Security",icon:"ri-lock-line",tab:"security"}],D=()=>{window.location.href=F},L=()=>{localStorage.removeItem("token"),localStorage.removeItem("user_id"),window.location.href="./dashboard.html"},A=async()=>{const r=await de();v.value&&(localStorage.removeItem("token"),await ue(r.id_token,{user_id:ce(r.id_token)["cognito:username"]}),window.location.href="./dashboard.html")},c=le(),s=_(null),d=_(null),C=_([]),G=_([]);Z(async()=>{const r=await c.fetchUserId(),t=await re(r.idToken,{user_id:r.userId,check_follower_id:r.userId});console.log(t),s.value=t.followed_count.followed_count,d.value=t.follower_count.follower_count;const g=await ee(r.idToken,{user_id:r.userId});G.value=g.followed_user.map(f=>({id:1,fullName:f.follower_id,company:"Yotz PVT LTD",role:"editor",username:f.follower_id,country:"El Salvador",contact:"(479) 232-9151",email:"gslixby0@abc.net.au",currentPlan:"enterprise",status:"Followed",avatar:`https://api.dicebear.com/7.x/bottts/svg?seed=${f.follower_id}`})),C.value=g.follower_user.map(f=>({id:1,fullName:f.followed_id,company:"Yotz PVT LTD",role:"editor",username:f.followed_id,country:"El Salvador",contact:"(479) 232-9151",email:"gslixby0@abc.net.au",currentPlan:"enterprise",status:"Following",avatar:`https://api.dicebear.com/7.x/bottts/svg?seed=${f.followed_id}`}))});const E=[{title:"User",key:"username"},{title:"Status",key:"status"}],P=r=>{const t=r.toLowerCase();return t==="subscriber"?{color:"success",icon:"ri-user-line"}:t==="author"?{color:"error",icon:"ri-computer-line"}:t==="maintainer"?{color:"info",icon:"ri-pie-chart-line"}:t==="editor"?{color:"warning",icon:"ri-edit-box-line"}:t==="admin"?{color:"primary",icon:"ri-vip-crown-line"}:{color:"success",icon:"ri-user-line"}},W=r=>{const t=r.toLowerCase();return t==="pending"?"warning":t==="active"?"success":t==="inactive"?"secondary":"primary"};s.value;const oe=[{title:"Share",value:"Share"},{title:"Refresh",value:"Refresh"},{title:"Update",value:"Update"}],M=r=>async t=>{const g=await me(c.idToken,{user_id:c.userId,followed_id:r});console.log(g)},j=r=>async t=>{const g=await fe(c.idToken,{user_id:c.userId,followed_id:r});console.log(g)};return(r,t)=>{const g=se,f=ae;return y(),T("div",null,[e(we,{modelValue:i(n),"onUpdate:modelValue":t[0]||(t[0]=o=>N(n)?n.value=o:null),"show-arrows":"",class:"v-tabs-pill"},{default:l(()=>[(y(),T(K,null,H($,o=>e(ge,{key:o.icon,value:o.tab},{default:l(()=>[e(w,{size:"20",start:"",icon:o.icon},null,8,["icon"]),m(" "+p(o.title),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),e(ve,{modelValue:i(n),"onUpdate:modelValue":t[2]||(t[2]=o=>N(n)?n.value=o:null),class:"mt-5 disable-tab-transition",touch:!1},{default:l(()=>[e(B,{value:"account"},{default:l(()=>[e(x,{class:"match-height"},{default:l(()=>[e(u,{cols:"12",md:"12"},{default:l(()=>[e(b,{title:i(c).userId},{prepend:l(()=>[e(S,{size:"4rem",image:`https://api.dicebear.com/7.x/bottts/svg?seed=${i(c).userId}`},null,8,["image"])]),subtitle:l(()=>t[3]||(t[3]=[])),append:l(()=>[e(g,{"menu-list":oe})]),default:l(()=>[e(k,{class:"pt-10"},{default:l(()=>[e(x,null,{default:l(()=>[e(u,{cols:"12",sm:"6",md:"3"},{default:l(()=>[a("div",he,[e(S,{color:"primary",rounded:"",size:"40",class:"elevation-2"},{default:l(()=>[e(w,{size:"24",icon:"ri-pie-chart-2-line"})]),_:1}),a("div",Ce,[t[4]||(t[4]=a("div",{class:"text-body-1"}," Followed By ",-1)),a("h5",Ie,p(i(s)?i(s):"　"),1)])])]),_:1}),e(u,{cols:"12",sm:"6",md:"3"},{default:l(()=>[a("div",Ue,[e(S,{color:"success",rounded:"",size:"40",class:"elevation-2"},{default:l(()=>[e(w,{size:"24",icon:"ri-pie-chart-2-line"})]),_:1}),a("div",Fe,[t[5]||(t[5]=a("div",{class:"text-body-1"}," Following ",-1)),a("h5",ze,p(i(d)?i(d):"　"),1)])])]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1}),e(u,{cols:"12",sm:"6"},{default:l(()=>[e(b,{title:"Followed By"},{default:l(()=>[e(O,{headers:E,items:i(G),"item-value":"id",class:"text-no-wrap"},{"item.username":l(({item:o})=>[a("div",Ae,[e(f,{image_url:`https://api.dicebear.com/7.x/bottts/svg?seed=${o.fullName}`,user_name:o.fullName,onClickFollow:M(o.fullName),onClickUnFollow:j(o.fullName)},null,8,["image_url","user_name","onClickFollow","onClickUnFollow"])])]),"item.role":l(({item:o})=>[a("div",Pe,[e(w,{icon:P(o.role).icon,color:P(o.role).color,size:"22"},null,8,["icon","color"]),a("div",Te,p(o.role),1)])]),"item.plan":l(({item:o})=>[a("span",Se,p(o.currentPlan),1)]),"item.status":l(({item:o})=>[e(Q,{color:W(o.status),size:"small",class:"text-capitalize"},{default:l(()=>[m(p(o.status),1)]),_:2},1032,["color"])]),bottom:l(()=>t[6]||(t[6]=[])),_:1},8,["items"])]),_:1})]),_:1}),e(u,{cols:"12",sm:"6"},{default:l(()=>[e(b,{title:"Following"},{default:l(()=>[e(O,{headers:E,items:i(C),"item-value":"id",class:"text-no-wrap"},{"item.username":l(({item:o})=>[a("div",$e,[e(f,{image_url:`https://api.dicebear.com/7.x/bottts/svg?seed=${o.username}`,user_name:o.username,onClickFollow:M(o.fullName),onClickUnFollow:j(o.fullName)},null,8,["image_url","user_name","onClickFollow","onClickUnFollow"])])]),"item.role":l(({item:o})=>[a("div",De,[e(w,{icon:P(o.role).icon,color:P(o.role).color,size:"22"},null,8,["icon","color"]),a("div",Le,p(o.role),1)])]),"item.plan":l(({item:o})=>[a("span",Ne,p(o.currentPlan),1)]),"item.status":l(({item:o})=>[e(Q,{color:W(o.status),size:"small",class:"text-capitalize"},{default:l(()=>[m(p(o.status),1)]),_:2},1032,["color"])]),bottom:l(()=>t[7]||(t[7]=[])),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}),e(B,{value:"security"},{default:l(()=>[e(x,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(b,{title:"パスワードの再設定 "},{default:l(()=>[e(k,null,{default:l(()=>[t[8]||(t[8]=a("p",{class:"text-base font-weight-medium mt-2"}," パスワードの再設定要件: ",-1)),a("ul",Re,[(y(),T(K,null,H(z,o=>a("li",{key:o,class:"d-flex"},[a("div",null,[e(w,{size:"7",icon:"ri-checkbox-blank-circle-fill",class:"me-3"})]),a("span",Be,p(o),1)])),64))])]),_:1}),e(k,{class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(V,{onClick:D},{default:l(()=>t[9]||(t[9]=[m(" パスワードを変更する ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(b,{title:"ログアウト"},{default:l(()=>[e(k,null,{default:l(()=>[t[11]||(t[11]=a("p",{class:"font-weight-semibold"},[m(" 本ブラウザに登録されたセッションからログアウトしますが、いつでもログインし直すことができます。 "),a("br"),m(" Account自体は削除されません。 "),a("br")],-1)),e(V,{onClick:L},{default:l(()=>t[10]||(t[10]=[m(" ログアウトする ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(x,null,{default:l(()=>[e(u,{cols:"12"},{default:l(()=>[e(b,{title:"Accountを削除"},{default:l(()=>[e(k,null,{default:l(()=>[t[13]||(t[13]=a("p",{class:"font-weight-semibold"},[m(" Accountを削除すると、すべてのデータが失われます。 "),a("br"),m(" 削除された場合、Accountにより投稿されたコンテンツは匿名化され、復元はできません。 "),a("br"),m(" Are you sure you want to delete this? ")],-1)),a("div",null,[e(be,{modelValue:i(v),"onUpdate:modelValue":t[1]||(t[1]=o=>N(v)?v.value=o:null),label:"Account削除を確認しました。"},null,8,["modelValue"])]),e(V,{disabled:!i(v),color:"error",class:"mt-3",onClick:A},{default:l(()=>t[12]||(t[12]=[m(" Accountを削除する ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(B,{value:"setting"},{default:l(()=>[e(ye)]),_:1})]),_:1},8,["modelValue"])])}}});export{wl as default};
