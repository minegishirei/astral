import{g as u,a as S,d,e as F,f as T}from"./callAPI-BwtG_Ftr.js";import{_ as $}from"./UserIcon.vue_vue_type_script_setup_true_lang-WHbtGkk8.js";import{r as P}from"./profile_image_url-2laLdfvb.js";import{d as D,g as m,i as z,a as k,o as s,w as o,c as _,f as v,b as r,u as f,a0 as N,F as U,a1 as B,W as y,t as l,e as i,V as I}from"./index-CV8jgHLp.js";import{V,a as L}from"./VRow-BNeMIAw1.js";import{a as Y,c as A,b as E,V as h}from"./VCard-MZJ7nrb6.js";import{V as M}from"./VChip-Bd_g2X-r.js";import"./VAvatar-chzBE4A5.js";import"./VImg-BkM45_PU.js";import"./VMenu-qx-k4EQP.js";import"./index-Dd8R62SY.js";import"./ssrBoot-DilDC8hj.js";import"./VDivider-B6LBcaL_.js";import"./VOverlay-DotTAGFz.js";import"./easing-DY7PVvcf.js";import"./scopeId-BZDymwJT.js";import"./forwardRefs-C-GTDzx5.js";import"./VListItemAction--c9byJgO.js";/* empty css              */import"./VSlideGroup-FymrTth9.js";const R={key:0,id:"loading",style:{position:"absolute","z-index":"99999",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},j={class:"clamp-text mb-0"},G={class:"mb-0"},H={class:"text-no-wrap"},W={class:"d-flex align-center"},Z={class:"text-subtitle-2 me-4"},q=["href"],ge=D({__name:"notification",setup(J){const c=m(!0),x=m([]),p=m([]),g=a=>{const t=a;return t==="subscriber"?{color:"success",icon:"ri-user-line"}:t==="author"?{color:"error",icon:"ri-computer-line"}:t==="maintainer"?{color:"info",icon:"ri-pie-chart-line"}:t==="editor"?{color:"warning",icon:"ri-edit-box-line"}:t==="admin"?{color:"primary",icon:"ri-vip-crown-line"}:{color:"success",icon:"ri-user-line"}},C=a=>{const t=a;return t==="pending"?"warning":t==="active"?"success":t==="inactive"?"secondary":"primary"};z(async()=>{c.value=!0;const a=await u(),t=await S(a.id_token,{user_id:d(a.id_token)["cognito:username"],update_read:"true"});x.value=t.notifications.map(e=>({id:1,fullName:e.from_user_id,entity_id:e.entity_id,company:"Yotz PVT LTD",role:"editor",username:e.from_user_id,country:"El Salvador",contact:"(479) 232-9151",email:e.message,currentPlan:"enterprise",status:e.is_read==="Y"?"inactive":"active",avatar:`https://api.dicebear.com/7.x/bottts/svg?seed=${e.from_user_id}`})),p.value=t.notifications.map(e=>({...e,id:1,fullName:e.from_user_id,entity_id:e.entity_id,company:"Yotz PVT LTD",role:"editor",username:e.from_user_id,country:"El Salvador",contact:"(479) 232-9151",message:e.message,currentPlan:"enterprise",status:e.is_read==="Y"?"inactive":"active",avatar:`https://api.dicebear.com/7.x/bottts/svg?seed=${e.from_user_id}`,created_at:e.created_at,entity_kind:e.entity_kind})),console.log(t),c.value=!1});const w=async a=>{const t=await u(),e=await F(t.id_token,{user_id:d(t.id_token)["cognito:username"],followed_id:a});console.log(e)},b=async a=>{const t=await u(),e=await T(t.id_token,{user_id:d(t.id_token)["cognito:username"],followed_id:a});console.log(e)};return(a,t)=>(s(),k(V,null,{default:o(()=>[f(c)?(s(),_("div",R,[r(N,{indeterminate:""})])):v("",!0),r(V,null,{default:o(()=>[(s(!0),_(U,null,B(f(p),e=>(s(),k(L,{cols:"12",md:"6",lg:"4"},{default:o(()=>[r(Y,{color:e.cardBg},{default:o(()=>[r(A,null,{prepend:o(()=>[r($,{image_url:f(P)(e.profile_image_url,e.username),user_name:e.username,onClickFollow:n=>w(e.username),onClickUnFollow:n=>b(e.username)},null,8,["image_url","user_name","onClickFollow","onClickUnFollow"])]),default:o(()=>[r(E,null,{default:o(()=>[y(l(e.title),1)]),_:2},1024)]),_:2},1024),r(h,null,{default:o(()=>[i("p",j,l(e.message),1),i("p",G,l((n=>`${n.getFullYear()}年${(n.getMonth()+1).toString().padStart(2,"0")}月${n.getDate().toString().padStart(2,"0")}日 ${n.getHours().toString().padStart(2,"0")}:${n.getMinutes().toString().padStart(2,"0")}:${n.getSeconds().toString().padStart(2,"0")}`)(new Date(new Date(e.created_at.slice(0,23)+"Z").getTime()+9*60*60*1e3))),1)]),_:2},1024),r(h,{class:"d-flex justify-space-between align-center flex-wrap"},{default:o(()=>[i("div",H,[r(M,{color:C(e.status),size:"small",class:"text-capitalize"},{default:o(()=>[y(l(e.status?"既読":"新着"),1)]),_:2},1032,["color"])]),i("div",W,[i("span",Z,l(e.likes),1),e.entity_kind=="node"?(s(),_("a",{key:0,href:`./dashboard.html?node_id=${e.entity_id}`,class:"d-flex gap-4"},[r(I,{icon:g(e.role).icon,color:g(e.role).color,size:"22"},null,8,["icon","color"]),t[0]||(t[0]=i("div",{class:"text-capitalize text-high-emphasis"}," 確認 ",-1))],8,q)):v("",!0)])]),_:2},1024)]),_:2},1032,["color"])]),_:2},1024))),256))]),_:1})]),_:1}))}});export{ge as default};
