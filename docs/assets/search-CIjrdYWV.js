import{_ as k}from"./NodeCard.vue_vue_type_script_setup_true_lang-BpEkk_-F.js";import{d as C,g as c,i as N,c as f,o as i,b as e,w as t,f as h,a0 as x,ag as b,e as S,$ as _,W as V,F as B,a1 as A,u as q,a as F}from"./index-CV8jgHLp.js";import{g as y,i as P,o as T}from"./callAPI-BwtG_Ftr.js";import{a,V as d}from"./VRow-BNeMIAw1.js";import{a as E,V as M}from"./VCard-MZJ7nrb6.js";import{V as R}from"./VForm-B19n-YV0.js";import{V as j}from"./VTextField-DKjCTJSD.js";import"./UserIcon.vue_vue_type_script_setup_true_lang-WHbtGkk8.js";import"./VAvatar-chzBE4A5.js";import"./VImg-BkM45_PU.js";import"./VMenu-qx-k4EQP.js";import"./index-Dd8R62SY.js";import"./ssrBoot-DilDC8hj.js";import"./VDivider-B6LBcaL_.js";import"./VOverlay-DotTAGFz.js";import"./easing-DY7PVvcf.js";import"./scopeId-BZDymwJT.js";import"./forwardRefs-C-GTDzx5.js";import"./VListItemAction--c9byJgO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./profile_image_url-2laLdfvb.js";import"./userId-D07-fi0X.js";import"./VChip-Bd_g2X-r.js";import"./VSlideGroup-FymrTth9.js";import"./VSpacer-DpcQwpcl.js";/* empty css              */import"./VInput-BMo-g2I_.js";const D={key:0,id:"loading",style:{position:"absolute","z-index":"99999",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},pe=C({__name:"search",setup(G){var r=c([]);const m=c(""),u=c(!1);N(async()=>{document.title="Astral - Network Graphåž‹SNS";const l=new URLSearchParams(window.location.search).get("query");l!==null&&(u.value=!0);const o=await y(),n=await P(o.id_token,{query:l});r.value=n.nodes,u.value=!1});const g=async()=>{window.location.href="/search.html?query="+m.value},v=async(l,o)=>{if(confirm("Are you sure you want to delete this?")){const s=await y(),p=await T(s.id_token,{user_id:l,node_id:o});console.log(p.node_id),r.value=Object.fromEntries(Object.entries(r.value).filter(([I,w])=>w.node_id!==p.node_id)),console.log(r.value)}};return(l,o)=>{const n=k;return i(),f("div",null,[e(d,null,{default:t(()=>[u.value?(i(),f("div",D,[e(x,{indeterminate:""})])):h("",!0),e(a,{cols:"12",md:"4"},{default:t(()=>[e(E,{title:"Search By "},{default:t(()=>[e(M,null,{default:t(()=>[e(R,{onSubmit:b(()=>{},["prevent"])},{default:t(()=>[e(d,null,{default:t(()=>[e(a,{cols:"12"},{default:t(()=>[e(d,{"no-gutters":""},{default:t(()=>[e(a,{cols:"12",md:"12"},{default:t(()=>o[1]||(o[1]=[S("label",{for:"firstName"},"Matches by title or text.",-1)])),_:1}),e(a,{cols:"12",md:"12"},{default:t(()=>[e(j,{id:"firstName",modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=s=>m.value=s),placeholder:"Engineer","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(a,{cols:"12"},{default:t(()=>[e(d,{"no-gutters":""},{default:t(()=>[e(a,{cols:"12",md:"3"}),e(a,{cols:"12",md:"9"},{default:t(()=>[e(_,{type:"submit",class:"me-4",onClick:g},{default:t(()=>o[2]||(o[2]=[V(" Search ")])),_:1}),e(_,{color:"secondary",variant:"outlined",type:"reset"},{default:t(()=>o[3]||(o[3]=[V(" Clear ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(i(!0),f(B,null,A(q(r),s=>(i(),F(a,{cols:"12",md:"8",lg:"4"},{default:t(()=>[e(n,{node:s,clamp_text:!0,onDeleteNode:v},null,8,["node"])]),_:2},1024))),256))]),_:1})])}}});export{pe as default};
